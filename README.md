# SBomber

Тестовый проект для реализации примеров паттернов, описанных в книге "Банда четёрых".

## Зависимости

Данный проект зависит от следующих пакетов:

- ncurses-base и ncurses-bin
  ```bash
  sudo apt-get install libncursesw5-dev
  ```

## Реализация паттернов

Паттерны реализованы в рамках отдельных `branch`, кроме `Singleton`.
Который, в рамках рефакторинга единицы трансляции `my_tools.cpp`,
реализован в основной ветке `main`.

### Применение паттерна Singleton

**Задача**: применить паттерн «Одиночка» для логирования событий в проекте
`SBomber` (рефакторинг модуля `my_tools.cpp`).

В единице трансляции `my_tools.cpp` есть вторая группа функций
(помимо функций для работы с экраном) для логирования событий в проекте SBomber.
Рассмотрим их прототипы:

```c++
void OpenLogFile(const std::string& FN);
void CloseLogFile();
void WriteToLog(const std::string& str);
void WriteToLog(const std::string& str, int n);
void WriteToLog(const std::string& str, double d);
```

Видим функции, которые открывают и закрывают файл для ведения лога,
и 3 функции для записи данных в лог-файл.

Необходимо выполнить рефакторинг этих функций и поместить их внутрь «Одиночки» `FileLoggerSingletone`.

### Применение паттерна «Посредник»
**Задача**: использовать паттерн «Посредник» для организации взаимодействия каких-либо объектов в игре.

Паттерн «Посредник» мог бы использоваться для организации текстового чата между игроками по сети.
Но для этого необходимо довольно сложное сетевое взаимодействие.
Поэтому упростим задачу.

Предположим, что объекты «Танки» обладают искусственным интеллектом и нужно сделать так,
чтобы они могли посылать текстовые сообщения на экран пользователя:
например, шуточные угрозы для самолёта, который их атакует.

Необходимо сделать в классе `LevelGUI` очередь полученных сообщений для вывода на экран.
Ставить сообщения в очередь будет объект класса `Mediator`.
Он же будет находиться в каждом объекте «Танк» (можно сделать поле статическим указателем).
При рисовании танка будем бросать кубик и с определённой вероятностью посылать какое-либо
сообщение для пилота самолёта (пользователя) через посредника объекту `LevelGUI`.

При рисовании GUI через `LevelGUI::Draw()` будем извлекать первое сообщение из очереди
и выводить его на нижнюю часть экрана какое-то небольшое время (3-5 сек).
После чего извлекаем следующее сообщение из очереди.
